

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>The View and Templating &mdash; Tethys Platform 0.1.0 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="top" title="Tethys Platform 0.1.0 documentation" href="../index.html"/>
        <link rel="up" title="Getting Started" href="../getting_started.html"/>
        <link rel="next" title="The Controller" href="controller.html"/>
        <link rel="prev" title="The Model and Persistent Stores" href="model.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        
          <a href="../index.html" class="fa fa-home"> Tethys Platform</a>
        
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../features.html">Tethys Platform</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../features.html#develop-web-apps">Develop Web Apps</a></li>
<li class="toctree-l2"><a class="reference internal" href="../features.html#python-software-development-kit">Python Software Development Kit</a></li>
<li class="toctree-l2"><a class="reference internal" href="../features.html#templating-and-gizmos">Templating and Gizmos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../features.html#spatial-data">Spatial Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../features.html#data-store">Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../features.html#computing">Computing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../features.html#developer-tools">Developer Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../features.html#production-ready">Production Ready</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../installation.html#install-the-dependencies">1. Install the Dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation.html#install-advanced-dependencies">2. Install Advanced Dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation.html#create-virtual-environment-and-install-tethys-platform">3. Create Virtual Environment and Install Tethys Platform</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation.html#create-database-and-database-users">4. Create Database and Database Users</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation.html#create-settings-file-and-configure-settings">5. Create Settings File and Configure Settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation.html#create-database-tables">6. Create Database Tables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation.html#start-up-the-django-development-server">7. Start up the Django Development Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation.html#what-s-next">What&#8217;s Next?</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../getting_started.html">Getting Started</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="scaffold.html">Create a New Tethys App Project</a></li>
<li class="toctree-l2"><a class="reference internal" href="model.html">The Model and Persistent Stores</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">The View and Templating</a></li>
<li class="toctree-l2"><a class="reference internal" href="controller.html">The Controller</a></li>
<li class="toctree-l2"><a class="reference internal" href="url_mapping.html">URL Mapping</a></li>
<li class="toctree-l2"><a class="reference internal" href="url_variables.html">Advanced Concepts</a></li>
<li class="toctree-l2"><a class="reference internal" href="forms.html">User Input and Forms</a></li>
<li class="toctree-l2"><a class="reference internal" href="distribution.html">Distributing Apps</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../tethys_sdk.html">Software Development Kit</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../tethys_sdk/app_class.html">App Base Class API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tethys_sdk/templating.html">App Templating API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tethys_sdk/gizmos.html">Template Gizmos API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tethys_sdk/dataset_services.html">Dataset Services API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tethys_sdk/persistent_store.html">Persistent Stores API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tethys_sdk/spatial_persistent_store.html">Spatial Persistent Stores API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tethys_sdk/spatial_publishing.html">Spatial Data Publishing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tethys_sdk/geoprocessing.html">Geoprocessing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tethys_sdk/visualizing.html">Data Visualization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tethys_sdk/cloud_computing.html">High Performance Computing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tethys_sdk/tethys_cli.html">Command Line Interface</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../supplementary.html">Supplementary</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../supplementary/key_concepts.html">Key Concepts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../supplementary/app_project.html">App Project Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../supplementary/terminal_quick_guide.html">Terminal Quick Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../supplementary/install_ubuntu.html">Ubuntu Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../supplementary/ckan_troubleshooting.html">CKAN Installation Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../supplementary/pgadmin.html">PGAdmin III Tutorial</a></li>
<li class="toctree-l2"><a class="reference internal" href="../supplementary/dev_environment.html">Setup Development Environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../supplementary/production_deployment.html">Deploy Apps in Production</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../summary.html">Summary of References</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">Tethys Platform</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../getting_started.html">Getting Started</a> &raquo;</li>
      
    <li>The View and Templating</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="../_sources/getting_started/view.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <div class="section" id="the-view-and-templating">
<h1>The View and Templating<a class="headerlink" href="#the-view-and-templating" title="Permalink to this headline">¶</a></h1>
<p><strong>Last Updated:</strong> November 24, 2014</p>
<p>In this section the View aspect of MVC will be introduced. The View consists of the representation or visualizations of your app&#8217;s data and the user interface. Views for Tethys apps are constructed using the standard web programming tools: HTML, JavaScript, and CSS. Additionally, Tethys Platform provides the Django Python templating language allowing you to insert Python code into your HTML documents, similar to how PHP is used. The result is dynamic, reusable templates for the web pages of your app.</p>
<p>In this tutorial you will add a view to your app for displaying the stream gages that are in your database on a Google Map.</p>
<div class="section" id="templating">
<h2>Templating<a class="headerlink" href="#templating" title="Permalink to this headline">¶</a></h2>
<p>The Django template language is a simple, but powerful templating language. This section will provide a crash course in Django template language basics, but we highly recommend a review of the <a class="reference external" href="https://docs.djangoproject.com/en/1.7/topics/templates/">Django Template Language</a> documentation.</p>
<p>Browse to the your templates directory located at <tt class="file docutils literal"><span class="pre">my_first_app/templates/</span></tt>. By convention, all the templates for your app are stored in a directory with the same name of your <a class="reference internal" href="../glossary.html#term-app-package"><em class="xref std std-term">app package</em></a> inside the templates directory (e.g.: <tt class="file docutils literal"><span class="pre">templates/my_first_app</span></tt>). This will prevent potential conflicts with the templates of other apps. You will find two templates in this directory: <tt class="file docutils literal"><span class="pre">base.html</span></tt> and <tt class="file docutils literal"><span class="pre">home.html</span></tt>. Refer to these templates as the Django template concepts are introduced.</p>
<div class="section" id="variables-filters-and-tags">
<h3>Variables, Filters, and Tags<a class="headerlink" href="#variables-filters-and-tags" title="Permalink to this headline">¶</a></h3>
<p>Django templates can contain variables, filters, and tags. Variables are denoted by double curly brace syntax like this: <tt class="docutils literal"><span class="pre">{{</span> <span class="pre">variable</span> <span class="pre">}}</span></tt>. Template variables are replaced by the value of the variable. Dot notation can be used access attributes of a variable: <tt class="docutils literal"><span class="pre">{{</span> <span class="pre">variable.attribute</span> <span class="pre">}}</span></tt>.</p>
<p>Variables can be modified by filters which look like this: <tt class="docutils literal"><span class="pre">{{</span> <span class="pre">variable|filter:argument</span> <span class="pre">}}</span></tt>. Filters perform modifying functions on variable output such as formatting dates, formatting numbers, changing the letter case, and concatenating multiple variables.</p>
<p>Tags use curly-brace-percent-sign syntax like this: <tt class="docutils literal"><span class="pre">{%</span> <span class="pre">tag</span> <span class="pre">%}</span></tt>. Tags perform many different functions including creating text, controlling flow, or loading external information to be used in the app. Some commonly used tags include <tt class="docutils literal"><span class="pre">for</span></tt>, <tt class="docutils literal"><span class="pre">if</span></tt>, <tt class="docutils literal"><span class="pre">block</span></tt>, and <tt class="docutils literal"><span class="pre">extends</span></tt>.</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">For a better explanation of variables, filters and tags, see the <a class="reference internal" href="../tethys_sdk/templating.html"><em>App Templating API</em></a>.</p>
</div>
</div>
<div class="section" id="template-inheritance">
<h3>Template Inheritance<a class="headerlink" href="#template-inheritance" title="Permalink to this headline">¶</a></h3>
<p>One of the advantages of using the Django template language is that it provides a way for child templates to extend parent templates, which reduces the amount of HTML you need to write. Template inheritance is accomplished using two tags: <tt class="docutils literal"><span class="pre">extends</span></tt> and <tt class="docutils literal"><span class="pre">block</span></tt>. Parent templates provide <tt class="docutils literal"><span class="pre">blocks</span></tt> of content that can be overridden by child templates. Child templates can extend parent templates by using the <tt class="docutils literal"><span class="pre">extends</span></tt> tag and specifying the template they which to inherit from. Calling the <tt class="docutils literal"><span class="pre">block</span></tt> tag of a parent template in a child template will override any content in that <tt class="docutils literal"><span class="pre">block</span></tt> tag with the content in the child template.</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">If you are unfamiliar with Django template inheritance, please review the <a class="reference external" href="https://docs.djangoproject.com/en/1.7/topics/templates/#template-inheritance">Django Template Inheritance</a> documentation before proceeding.</p>
</div>
</div>
<div class="section" id="base-template">
<h3>Base Template<a class="headerlink" href="#base-template" title="Permalink to this headline">¶</a></h3>
<p>Tethys apps generated from the scaffold come with a <tt class="file docutils literal"><span class="pre">base.html</span></tt> template which has the following contents:</p>
<div class="highlight-python"><div class="highlight"><pre>{% extends &quot;tethys_apps/app_base.html&quot; %}

{% load staticfiles %}

{% block title %}- {{ tethys_app.name }}{% endblock %}

{% block styles %}
  {{ block.super }}
  &lt;link href=&quot;{% static &#39;my_first_app/css/main.css&#39; %}&quot; rel=&quot;stylesheet&quot;/&gt;
{% endblock %}

{% block app_icon %}
  {# The path you provided in your app.py is accessible through the tethys_app.icon context variable #}
  &lt;img src=&quot;{% static tethys_app.icon %}&quot;&gt;
{% endblock %}

{# The name you provided in your app.py is accessible through the tethys_app.name context variable #}
{% block app_title %}{{ tethys_app.name }}{% endblock %}

{% block app_navigation_items %}
  . . .
{% endblock %}

{% block app_content %}
{% endblock %}

{% block app_actions %}
{% endblock %}

{% block scripts %}
  {{ block.super }}
  &lt;script src=&quot;{% static &#39;my_first_app/js/main.js&#39; %}&quot; type=&quot;text/javascript&quot;&gt;&lt;/script&gt;
{% endblock %}
</pre></div>
</div>
<p>The <tt class="file docutils literal"><span class="pre">base.html</span></tt> template is intended to be used as the parent template for all your app templates via the <tt class="docutils literal"><span class="pre">extends</span></tt> tag. It contains several <tt class="docutils literal"><span class="pre">block</span></tt> tags that your app templates can override or extend. The <tt class="docutils literal"><span class="pre">block</span></tt> tags you will use most often are <tt class="docutils literal"><span class="pre">app_navigation_items</span></tt>, <tt class="docutils literal"><span class="pre">app_content</span></tt>, and, <tt class="docutils literal"><span class="pre">app_actions</span></tt>. These blocks correspond with different parts of the app interface (shown in the figure below). As a rule, content that you would like to be present in all your templates should be included in the <tt class="file docutils literal"><span class="pre">base.html</span></tt> template and content that is specific to a certain template should be included in that template.</p>
<div class="figure">
<a class="reference internal image-reference" href="../_images/template_blocks.png"><img alt="../_images/template_blocks.png" src="../_images/template_blocks.png" style="width: 650px;" /></a>
<p class="caption">The <tt class="docutils literal"><span class="pre">block</span></tt> tags of the <tt class="file docutils literal"><span class="pre">base.html</span></tt> template correspond with different parts of the interface: (1) <tt class="docutils literal"><span class="pre">app_navigation_items</span></tt>, (2) <tt class="docutils literal"><span class="pre">app_content</span></tt>, and (3) <tt class="docutils literal"><span class="pre">app_actions</span></tt>.</p>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">For an explanation of the blocks in the <tt class="file docutils literal"><span class="pre">base.html</span></tt> template see the <a class="reference internal" href="../tethys_sdk/templating.html"><em>App Templating API</em></a>.</p>
</div>
</div>
</div>
<div class="section" id="public-files-and-resources">
<h2>Public Files and Resources<a class="headerlink" href="#public-files-and-resources" title="Permalink to this headline">¶</a></h2>
<p>Most apps will use files and resources that are static&#8211;meaning they do not need to be preprocessed before being served like templates do. Examples of these files include images, CSS files, and JavaScript files. Tethys Platform will automatically register static files that are located in the <tt class="file docutils literal"><span class="pre">public</span></tt> directory of your app project. Use the <tt class="docutils literal"><span class="pre">static</span></tt> tag in templates to load the resource URLs. The <tt class="file docutils literal"><span class="pre">base.html</span></tt> template provides examples of how to use the <tt class="docutils literal"><span class="pre">static</span></tt> tag. See the Django documentation for the <a class="reference external" href="https://docs.djangoproject.com/en/1.7/ref/contrib/staticfiles/#static">static</a> tag for more details.</p>
<div class="admonition caution">
<p class="first admonition-title">Caution</p>
<p class="last">Any file stored in the public directory will be accesible to anyone. Be careful not to expose sensitive information.</p>
</div>
</div>
<div class="section" id="make-a-new-template">
<h2>Make a New Template<a class="headerlink" href="#make-a-new-template" title="Permalink to this headline">¶</a></h2>
<p>Now that you know the basics of templating, you will learn how to create new templates that extend the base template and use the <tt class="docutils literal"><span class="pre">block</span></tt> tags. Create a new template in your templates directory (<tt class="file docutils literal"><span class="pre">my_first_app/templates/my_first_app/</span></tt>) and name it <tt class="file docutils literal"><span class="pre">map.html</span></tt>. Open this file in a text editor and copy and paste the following code into it:</p>
<div class="highlight-python"><div class="highlight"><pre>{% extends &quot;my_first_app/base.html&quot; %}

{% load tethys_gizmos %}

{% block app_content %}
  &lt;h1&gt;Stream Gages&lt;/h1&gt;
  {% gizmo editable_google_map map_options %}
{% endblock %}

{% block app_actions %}
  &lt;a href=&quot;{% url &#39;my_first_app:home&#39; %}&quot; class=&quot;btn btn-default&quot;&gt;Back&lt;/a&gt;
{% endblock %}

{% block scripts %}
  {{ block.super }}
  {% gizmo_dependencies %}
{% endblock %}
</pre></div>
</div>
<p>The <tt class="file docutils literal"><span class="pre">map.html</span></tt> template that you created extends the <tt class="file docutils literal"><span class="pre">base.html</span></tt> template. It also overrides the <tt class="docutils literal"><span class="pre">app_content</span></tt>, <cite>app_actions`</cite>, and <tt class="docutils literal"><span class="pre">scripts</span></tt> blocks. An action called &#8220;Back&#8221; is added to the <tt class="docutils literal"><span class="pre">app_actions</span></tt> block. It uses a new tag, the <tt class="docutils literal"><span class="pre">url</span></tt> tag, to provide a link back to the home page of the app. The <tt class="docutils literal"><span class="pre">url</span></tt> tag will be discussed in more detail in the <a class="reference internal" href="url_mapping.html"><em>URL Mapping</em></a> tutorial.</p>
<p>The map is inserted into the <tt class="docutils literal"><span class="pre">app_content</span></tt> block using one of the Tethys Gizmos called <tt class="docutils literal"><span class="pre">editable_google_map</span></tt>. Gizmos are an easy way to insert common user interface elements in to your templates with minimal code. The map is configured via a dictionary called <tt class="docutils literal"><span class="pre">map_options</span></tt>, which is defined in the controller. This will be discussed in the next tutorial. For more information on Gizmos, refer to the <a class="reference internal" href="../tethys_sdk/gizmos.html"><em>Template Gizmos API</em></a> documentation.</p>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="controller.html" class="btn btn-neutral float-right" title="The Controller">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="model.html" class="btn btn-neutral" title="The Model and Persistent Stores"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2014, Nathan Swain.
    </p>
  </div>

  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
  
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>